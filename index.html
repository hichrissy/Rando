<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Product Roadmap</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            overflow: hidden;
            width: 100vw;
            height: 100vh;
        }

        #container {
            width: 100%;
            height: 100%;
            overflow: auto;
        }

        .node circle {
            stroke: #333;
            stroke-width: 2px;
        }

        .node text {
            font-size: 12px;
            font-weight: 500;
        }

        .link {
            fill: none;
            stroke: #ccc;
            stroke-width: 1.5px;
        }

        .done {
            fill: #28a745;
        }

        .in-progress {
            fill: #007bff;
        }

        .not-started {
            fill: #ccc;
        }

        /* Mobile optimizations */
        @media (max-width: 768px) {
            .node text {
                font-size: 10px;
            }
        }

        /* Tooltip styles */
        .tooltip {
            position: absolute;
            padding: 8px;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            border-radius: 4px;
            font-size: 12px;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.2s;
        }
    </style>
</head>
<body>
    <div id="container">
        <svg id="roadmap"></svg>
    </div>
    <script>
        // Tree data structure
        const treeData = {
            "name": "Product Roadmap",
            "children": [
                {
                    "name": "AI Infrastructure & Automation",
                    "status": "in-progress",
                    "children": [
                        {
                            "name": "Agentic System",
                            "status": "in-progress",
                            "children": [
                                {
                                    "name": "Role-Based Specialisation",
                                    "status": "in-progress",
                                    "children": [
                                        { "name": "Define Agent Roles & Expertise", "status": "done" },
                                        { "name": "Role-Specific Task Assignment", "status": "in-progress" },
                                        { "name": "Role-Based Access & Permissions", "status": "not-started" },
                                        { "name": "Agent Training by Role", "status": "not-started" },
                                        { "name": "Decision-Making & Escalation Rules", "status": "not-started" }
                                    ]
                                }
                            ]
                        },
                        {
                            "name": "ARC System",
                            "status": "in-progress",
                            "children": [
                                {
                                    "name": "RAG",
                                    "status": "in-progress",
                                    "children": [
                                        { "name": "Brand DNA Retrieval", "status": "not-started" },
                                        { "name": "Brief Ingestion & Structuring", "status": "not-started" },
                                        { "name": "Vectorstore Integration", "status": "not-started" },
                                        { "name": "Automated Data Enrichment", "status": "not-started" }
                                    ]
                                },
                                {
                                    "name": "Adaptive Generation",
                                    "status": "in-progress",
                                    "children": [
                                        { "name": "Real-Time Performance Adjustments", "status": "not-started" },
                                        { "name": "Historical Campaign Learning", "status": "not-started" },
                                        { "name": "Persona-Driven Optimisation", "status": "not-started" },
                                        { "name": "Multi-Variant Adaptive Testing", "status": "not-started" },
                                        { "name": "Predictive Content Ranking", "status": "not-started" }
                                    ]
                                }
                            ]
                        },
                        {
                            "name": "Kubric",
                            "status": "in-progress",
                            "children": [
                                { "name": "Automated Video Generation", "status": "not-started" },
                                { "name": "Template-Based Asset Creation", "status": "not-started" },
                                { "name": "AI-Driven Motion Graphics", "status": "not-started" },
                                { "name": "Dynamic Scene Adaptation", "status": "not-started" }
                            ]
                        }
                    ]
                },
                {
                    "name": "Brand DNA",
                    "status": "in-progress",
                    "children": [
                        { "name": "AI Company Analysis", "status": "done" },
                        { "name": "Brand Identity Ingestion", "status": "done" },
                        { "name": "PSD Template Creation", "status": "done" },
                        { "name": "AI Image Annotation", "status": "in-progress" },
                        { "name": "Ad Training", "status": "in-progress" },
                        { "name": "Brand Data Structuring & Storing", "status": "done" }
                    ]
                },
                {
                    "name": "Campaign Initiation",
                    "status": "in-progress",
                    "children": [
                        { "name": "AI Brief Builder", "status": "in-progress" },
                        { "name": "AI Brainstorming (Chat)", "status": "not-started" },
                        { "name": "Brief Upload & Analysis", "status": "in-progress" },
                        { "name": "Campaign Brief Generation", "status": "in-progress" },
                        { "name": "Campaign Data Storage & Structuring", "status": "in-progress" },
                        { "name": "Campaign Dashboard", "status": "in-progress" }
                    ]
                }
            ]
        };

        // Set up the SVG container
        const container = document.getElementById('container');
        const svg = d3.select("#roadmap");
        const tooltip = d3.select("body")
            .append("div")
            .attr("class", "tooltip");

        // Calculate initial dimensions
        let width = container.clientWidth;
        let height = container.clientHeight;

        // Update SVG dimensions
        svg.attr("width", width)
           .attr("height", height);

        // Create zoom behavior
        const zoom = d3.zoom()
            .scaleExtent([0.1, 3])
            .on("zoom", (event) => {
                g.attr("transform", event.transform);
            });

        // Apply zoom to SVG
        svg.call(zoom);

        // Create the main group element
        const g = svg.append("g")
            .attr("transform", "translate(40,40)");

        // Create the tree layout
        const treeLayout = d3.tree()
            .size([height - 80, width - 160]);

        // Create the root hierarchy
        const root = d3.hierarchy(treeData, d => d.children);

        // Generate the tree layout
        treeLayout(root);

        // Create the links
        const links = g.selectAll(".link")
            .data(root.links())
            .enter()
            .append("path")
            .attr("class", "link")
            .attr("d", d3.linkHorizontal()
                .x(d => d.y)
                .y(d => d.x));

        // Create the nodes
        const nodes = g.selectAll(".node")
            .data(root.descendants())
            .enter()
            .append("g")
            .attr("class", "node")
            .attr("transform", d => `translate(${d.y},${d.x})`);

        // Add circles to nodes
        nodes.append("circle")
            .attr("r", 6)
            .attr("class", d => d.data.status || "not-started")
            .on("mouseover", (event, d) => {
                tooltip.style("opacity", 1)
                    .html(`Status: ${d.data.status || "not-started"}`)
                    .style("left", (event.pageX + 10) + "px")
                    .style("top", (event.pageY - 10) + "px");
            })
            .on("mouseout", () => {
                tooltip.style("opacity", 0);
            });

        // Add text labels to nodes
        nodes.append("text")
            .attr("dy", "0.31em")
            .attr("x", d => d.children ? -10 : 10)
            .style("text-anchor", d => d.children ? "end" : "start")
            .text(d => d.data.name);

        // Handle window resizing
        window.addEventListener('resize', () => {
            width = container.clientWidth;
            height = container.clientHeight;
            
            svg.attr("width", width)
               .attr("height", height);
            
            treeLayout.size([height - 80, width - 160]);
            treeLayout(root);

            // Update links
            links.attr("d", d3.linkHorizontal()
                .x(d => d.y)
                .y(d => d.x));

            // Update nodes
            nodes.attr("transform", d => `translate(${d.y},${d.x})`);
        });

        // Initial zoom to fit
        const bounds = g.node().getBBox();
        const fullWidth = bounds.width;
        const fullHeight = bounds.height;
        const scale = Math.min(width / fullWidth, height / fullHeight) * 0.9;
        const translateX = (width - fullWidth * scale) / 2;
        const translateY = (height - fullHeight * scale) / 2;

        svg.call(zoom.transform, d3.zoomIdentity
            .translate(translateX, translateY)
            .scale(scale));
    </script>
</body>
</html>
